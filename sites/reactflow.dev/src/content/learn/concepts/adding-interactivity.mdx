---
description: This guide will show you how to add basic interactivity to your flow.
---

import { Callout, Steps } from 'nextra/components';
import { RemoteCodeViewer } from 'xy-shared/server';

# Adding Interactivity

Now that we've built our [first flow](learn/concepts/building-a-flow), let's add interactivity so you can select, drag, and remove nodes and edges.

## Handling Change Events

By default React Flow doesn't manage any internal state updates besides handling the viewport. As with an `<input />` element you need to pass event handlers to React Flow in order to apply triggered changes to your nodes and edges. To **select**, **drag** and **remove** nodes and edges you need to implement [event handlers](/api-reference/react-flow#event-handlers):

 <Steps>
 ### Add imports

To manage changes, we'll be using `useState` with two helper functions from React Flow: [`applyNodeChanges`](http://localhost:3002/api-reference/utils/apply-node-changes) and [`applyEdgeChanges`](http://localhost:3002/api-reference/utils/apply-edge-changes).

```jsx
import { useState, useCallback } from 'react';
import { ReactFlow, applyEdgeChanges, applyNodeChanges } from '@xyflow/react';
```

### Define nodes and edges

We need to define initial nodes and edges. These will be the starting point for our flow. (If you followed the instructions on the last page, you can just rename them)

```jsx
const initialNodes = [
  {
    id: 'n1',
    position: { x: 0, y: 0 },
    data: { label: 'Hello' },
    type: 'input',
  },
  {
    id: 'n2',
    position: { x: 100, y: 100 },
    data: { label: 'World' },
  },
];

const initialEdges = [
  {
    id: 'n1-n2',
    source: 'n1',
    target: 'n2',
  },
];
```

### Initialize state

In our component, we'll call the `useState` hook to manage the state of our nodes and edges:

```js
const [nodes, setNodes] = useState(initialNodes);
const [edges, setEdges] = useState(initialEdges);
```

### Add event handlers

We need to create two event handlers: [`onNodesChange`](http://localhost:3002/api-reference/react-flow#onnodeschange) and [`onEdgesChange`](http://localhost:3002/api-reference/react-flow#onedgeschange). They will be used to update the state of our nodes and edges when changes occur, such as dragging or deleting an element.

```jsx
const onNodesChange = useCallback(
  (changes) => setNodes((nds) => applyNodeChanges(changes, nds)),
  [],
);
const onEdgesChange = useCallback(
  (changes) => setEdges((eds) => applyEdgeChanges(changes, eds)),
  [],
);
```

### Pass everything to ReactFlow

Now we can pass our nodes, edges, and event handlers to the `<ReactFlow />` component:

```jsx
<ReactFlow
  nodes={nodes}
  edges={edges}
  onNodesChange={onNodesChange}
  onEdgesChange={onEdgesChange}
  fitView
>
  <Background />
  <Controls />
</ReactFlow>
```

### Interactive Flow

And that's it! You now have a basic interactive flow üéâ

When you drag or select a node, the `onNodesChange` handler is triggered. The `applyNodeChanges` function then uses these change events to update the current state of your nodes. Here's how it all comes together. Try clicking and dragging a node to move it around and watch the UI update in real time.

<RemoteCodeViewer
  showEditor={false}
  editorHeight={'25vh'}
  route="learn/make-it-interactive-1"
  framework="react"
/>
 </Steps>

## Handle Connections

One last piece is missing: connecting nodes interactively. For this, we need to implement an [`onConnect`](http://localhost:3002/api-reference/react-flow#onconnect) handler.

<Steps>
### Create `onConnect` handler

The `onConnect` handler is called whenever a new connection is made between two nodes. We can use the `addEdge` utility function to create a new edge and update the edge Array.

```jsx
const onConnect = useCallback((params) => setEdges((eds) => addEdge(params, eds)), []);
```

### Pass it to ReactFlow

Now we can pass the `onConnect` handler to the `<ReactFlow />` component:

```jsx
<ReactFlow
  ...
  onConnect={onConnect}
  fitView
>
  <Background />
  <Controls />
</ReactFlow>
```

### Connectable Flow

Try to connect the two nodes by dragging from on handle to another one. The `onConnect` handler will be triggered, and the new edge will be added to the flow. ü•≥

<RemoteCodeViewer
  showEditor={false}
  editorHeight={'25vh'}
  route="learn/make-it-interactive-2"
  framework="react"
/>

</Steps>

## Full Code Example üèÅ

<RemoteCodeViewer
  orientation="horizontal"
  route="learn/make-it-interactive-2"
  framework="react"
/>

What is happening here? Whenever React Flow triggers a change (node init, node drag, edge select, etc.), the `onNodesChange` handler gets called. We export an `applyNodeChanges` handler so that you don't need to handle the changes by yourself. The `applyNodeChanges` handler returns an updated array of nodes that is your new nodes array. You now have an interactive flow with the following interactions:

- selectable nodes and edges
- draggable nodes
- removable nodes and edges - (press Backspace to remove a selected node or edge, can be adjusted with the `deleteKeyCode` prop)
- connectable nodes by dragging from one node handle to another
- multi-selection area by pressing Shift (that's the default `selectionKeyCode`)
- multi-selection by pressing command (that's the default `multiSelectionKeyCode`)

If you want to jump straight into creating your own application, we recommend to checking out the [Customization](/learn/customization) section.

Otherwise keep continue reading to learn more about React Flows capabilities.
